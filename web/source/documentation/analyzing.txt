.. _analyzing:

********************
Analyzing the Output
********************

.. _rmgoutput:

RMG Output Files
================

RMG will generate several types of output files, each with a different purpose.
These files will be located in the directory which contains the condition file.  
Generally, there are five outputs from RMG (six if pressure-dependence is turned on):

#. :file:`output.txt`.  This is a large file that shows the many steps RMG went
   through to build the model, including the addition of each new species,
   concentrations and fluxes at all of the reported integration time steps for each reaction system, and
   generally the details as RMG builds the mechanism. It is useful for debugging if
   a problem occurs, but other output files are better if all you are concerned about is the
   final model and its behavior. This file also lists the input file at the
   beginning.

#. :file:`Final_Model.txt`.  As its name would imply, this file contains the details of the final model created by RMG.   
   For each Reaction System (combination of Temperature, Pressure, and Concentration) specified by the user, the following information is available:
   
   The concentration and mole fraction profiles of all "core" species, based on the time step information 
   (the "TimeStep" or "Conversions" field) provided in the :file:`condition.txt` file.  This data can easily be pasted into a 
   spreadsheeting program for analysis and plotting.
   
   The next set of information contained in the file is a list of all reactions included in the model, along with the modified Arrhenius parameters
   used for each reaction.  For information on where these Arrhenius parameters came from (i.e. which reaction family),
   consult the :file:`chem.inp` file.  This set of data may also be pasted into a spreadsheeting program easily.  
   
   Some of the reactions listed in the :file:`Final_Model.txt` file may not have Arrhenius rate coefficient expressions; these
   reactions are pressure-dependent reactions generated by RMG.  The pressure-dependent rate coefficient expression for each of
   these reactions is located in the :file:`chem.inp` file.
   
   The next set of information contains the flux of each reaction, for each time step provided in the :file:`condition.txt` file.
   A negative flux means the reverse reaction (as written) was dominant.
   
   The last set of information is the total running time.  If sensitivity information was requested, it would also appear in this file.

#. :file:`chem.inp` (located in :file:`$RMG/chemkin`).  This file contains the CHEMKIN model and associated thermodynamic data. The file
   lists the elements, species, thermodynamics data (in NASA-7 polynomial form), and reactions (without N2, Ar, He, or Ne) for the model.
   
   If a species thermochemistry came from a Primary Thermo Library, a comment will
   precede the NASA-7 polynomial, stating which Primary Thermo Library it came from
   and the name of the species as identified in the Primary Thermo Library.  For example::
   
   		!Primary Thermo Library: GRIMech3.0 (Species ID: s00009193)
		CH4(2)                  C   1H   4          G   300.000  5000.000   995.043    1
		 1.20933782E+00 1.07635862E-02-3.69789759E-06 5.80285027E-10-3.41693862E-14    2
		-9.79206547E+03 1.24619300E+01 3.63765769E+00-2.58941555E-03 2.18452253E-05    3
		-2.01605036E-08 6.08817863E-12-1.00975312E+04 1.65214016E+00                   4
	
   This comment informs the user the species thermochemistry came from the species
   labeled "s00009193" in the GRIMech3.0 Primary Thermo Library.
	
   A comment follows each reaction in the :file:`chem.inp` file.  The comments are
   usually of the following two forms::
	
	C5H7J(13)+CH3J(14)=HXD13(1) 2.4874006e+15 	 -0.90000 	 0.25000 	 !R_Recombination estimate: (Average:)  C_rad/H2/Cd     C_methyl     
	C5H7J(85)=C5H7J(13) 4.0800000e+05 	 1.91990 	 7.89680 	 !intra_H_migration exact:   R5H_DSMS     Cd_rad_out_singleH     Cs_H_out_2H
		
   The first set of characters after the "!" reflect which reaction family the
   modified Arrhenius parameters came from.  The next set of characters is either
   "exact" or "estimate"; this will be explained in further detail shortly.  If the
   numbers are an "estimate", the word "Average:" will follow.  The last set of
   characters are the functional groups RMG classified for this reaction.
	
   If the kinetics are "exact", this means RMG has a number in its database for the
   set of functional groups listed.  In the previous example, RMG found kinetics in
   the "intra_H_migration" reaction family for the set of nodes: {R5H_DSMS, Cd_rad_out_singleH, Cs_H_out_2H}.
	
   If the kinetics are an "estimate", RMG did not find numbers for the set of functional
   groups listed.  Thus, RMG could not find kinetics in the "R_Recombination" reaction
   family for the set of nodes: {C_rad/H2/Cd, C_methyl}.  So, an averaging scheme 
   was performed to generate the reported modified Arrhenius parameters.
	
   The previous two examples were generated by setting the "Verbose" field in the
   :file:`condition.txt` file "off".  If the user sets the "Verbose" field "on"::
	
	C5H7J(13)+CH3J(14)=HXD13(1) 2.4874006e+15 	 -0.90000 	 0.25000 	 !R_Recombination estimate: (Average of: (Average of: (C_methyl C_methyl && Average of: (C_rad/H2/Cs C_rad/H2/Cs) && Average of: (C_rad/H/NonDeC C_rad/H/NonDeC) && Average of: (Average of: (C_rad/Cs3 C_rad/Cs3)))))  C_rad/H2/Cd     C_methyl
		
   If you wish to immediately run the generated :file:`chem.inp` file in CHEMKIN, please set the "Verbose" field to off;
   some of the "Average of: ..." comments span too many characters for the CHEMKIN Pre-Processor to handle.
   
   Lastly, if the reaction (and thus, kinetics) came from a Reaction Library or Seed Mechanism,
   the comments will reflect this.  If the reaction was generated by RMG, but the kientics were taken from a Primary
   Kinetics Library, that information will also be reported here.

#. :file:`RMG_Dictionary.txt`.  This file lists all the species by name that are
   used in the model, as well as their adjacency list; if the :ref:`InChI generation feature <InChIgeneration>` is turned
   on, the file will also contain the InChI representation for each molecule.  This file allows
   the user to see a graphical representation of all species in the model. Typically
   the user will copy this file to an appropriate directory so that it can be read
   by the RMGVE (See Section :ref:`viewrmgve` for further details).

#. :file:`tran.dat` (located in :file:`$RMG/chemkin`).  This file contains the estimated transport properties for all "core" 
   species in the mechanism.  The source of each species' transport data is listed at the end of the line, for example::
   
      HXD13(1)           2   356.098     5.979     0.000     0.000     1.000 ! LJ parameters estimated by RMG: Tc= 513.568K Pc=  34.602bar Vc= 332.500cm3/mol Tb= 337.520K	(CdH2R, CdHR2, CdHR2, CdHR2, CsH2R2, CsH3R)
      CH4(2)             2   141.400     3.746     0.000     2.600    13.000 ! Primary Transport Library: GRIMech3.0 (Species ID: CH4)	

   The first species' properties were estimated by RMG.  The group-additivity estimated critical properties and boiling point
   are listed first, followed by the node names that RMG matched in performing the group-additivity method.  The complete set
   of transport nodes may be found in :file:`$RMG/databases/RMG_database/transport_groups/`.
   
   The second species' properties were read-in from a "Primary Transport Library" supplied by the user, in this case, the
   library named "GRIMech3.0".  The name of the species RMG matched is listed at the end of the comments, in this case, CH4.
   
#. :file:`tableOfRateCoeffs.txt` (located in :file:`$RMG/chemkin`).  If pressure-dependence was turned on, an additional
   file will be stored in :file:`$RMG/chemkin`.  This file contains the computed k(T,P) for all reactions present in the
   mechanism, for each temperature and pressure requested by the user in the :file:`condition.txt` file.  These rate coefficients were
   used to compute the reported Chebyshev or PLOG pressure-dependent rate coefficients reported in the :file:`chem.inp` file.

#. :file:`SpeciesProfiles_N.txt` (located in :file:`$RMG_JOB_SCRATCH/ODESolver`).
   This is a tab-separated text file (suitable for opening in a spreadsheet
   like Excel) containing the concentration of each species (moles per cm\
   :sup:`3`\ ) as a function of time (seconds). There is an entry for every
   timestep of the ODE solver. This is particularly useful when running with
   AUTO timesteps in the :ref:`dynamicsimulator`. The number at the end of the
   filename indicates which reaction system it corresponds to
   (e.g. if multiple reaction systems are set up at different :ref:`initial conditions
   <initialconditions>`\ ).
   Because the file is replaced
   every time the ODE solver runs, at the end of running RMG it will
   contain the results from the most recently run simulations.
   
#. :file:`restartConditionFile.txt`.  This file is a modified condition file which can be used for restarting a RMG job.
   The original condition file is appended with all the species in the current core (not contained in the seed) with 
   zero concentration. All other settings/options in the original condition file are preserved. Running an RMG job using
   this condition file causes the original model to be recovered after the first time step.

.. _viewrmgve:

Viewing the Species in the RMG Viewer/Editor (RMGVE)
====================================================

When RMG has finished, it will create a file :file:`RMG_Dictionary.txt` in the same
directory as the :file:`condition.txt` file.  This file contains a list of all the
core species (usually the edge species are too numerous to be of use); the core
species can be viewed easily using the RMGVE. To view the core species, rename
the first part of the file (this step isn't strictly necessary, but it is
convenient and a good practice). The file must still end in
":file:`_Dictionary.txt`" (e.g. :file:`newname_Dictionary.txt`) for the RMGVE to read
it. Next, copy this file to the directory :file:`$RMG/databases/RMG_database/thermo_groups`. Once the
file is in the :file:`thermo_groups` directory, double-click on the :file:`RMGVE 20080101.bat` file to
launch the program. Please note that you must close and relaunch the program
every time you add a new file to the :file:`thermo_groups` directory. Once the RMGVE has
launched, double-click on the folder :file:`Thermo`. Your new file should appear in
this directory (e.g. newname without the ":file:`_Dictionary.txt`").  Push the "Read family" button and
a new window should appear with a list of names. Highlight any name and click
"View" to see its structure.